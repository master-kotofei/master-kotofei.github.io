@echo off
chcp 65001 >nul
REM Batch —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ Hugo —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
REM –ò—Å–ø–æ–ª—å–∑—É–µ—Ç hugo.local.toml –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

echo üöÄ –ó–∞–ø—É—Å–∫ Hugo —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏...

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–ø—É—â–µ–Ω –ª–∏ —É–∂–µ —Å–µ—Ä–≤–µ—Ä
netstat -an | findstr ":1313" >nul
if %errorlevel% equ 0 (
    echo ‚ö†Ô∏è  –ü–æ—Ä—Ç 1313 —É–∂–µ –∑–∞–Ω—è—Ç! –í–æ–∑–º–æ–∂–Ω–æ, —Å–µ—Ä–≤–µ—Ä —É–∂–µ –∑–∞–ø—É—â–µ–Ω.
    echo üí° –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ stop-dev.bat –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
    pause
    exit /b 1
)

echo üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: hugo.local.toml
echo üåê –°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:1313
echo.

REM –ó–∞–ø—É—Å–∫ Hugo —Å–µ—Ä–≤–µ—Ä–∞
echo üîÑ –ó–∞–ø—É—Å–∫ Hugo —Å–µ—Ä–≤–µ—Ä–∞...
start /B "Hugo Server" cmd /c "hugo server --config hugo.local.toml --bind 0.0.0.0 --port 1313 --buildDrafts --buildFuture --disableFastRender > hugo-dev.log 2>&1"

REM –ñ–¥–µ–º –Ω–µ–º–Ω–æ–≥–æ, —á—Ç–æ–±—ã —Å–µ—Ä–≤–µ—Ä —É—Å–ø–µ–ª –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
timeout /t 3 /nobreak >nul

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
netstat -an | findstr ":1313" >nul
if %errorlevel% equ 0 (
    echo ‚úÖ Hugo —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
    echo üåê –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:1313
    echo üìã –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª: hugo-dev.log
    echo üõë –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: stop-dev.bat
    echo.
    echo üéâ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å. –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ.
) else (
    echo ‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª–µ hugo-dev.log
    pause
    exit /b 1
)
